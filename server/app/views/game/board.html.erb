<% include_javascript 'open_catan/renderer' -%>
<% onload do -%>
  var board = new OpenCatan.Board("<%= @foo.to_json.gsub(/"/, "\\\"") %>");
  var canvas = new OpenCatan.Canvas("#board", board);
  players = ["red", "orange", "blue", "white"];
  canvas.render();
<% end -%>

<canvas id="board" width="<%= 750 %>" height="<%= 500 %>"></canvas>
<div id="status">
  Game Status: <%= @game.game_state.humanize %>; 
  Current Player: <%= @game.current_player.name unless ['players_joining', 'determining_turn_order'].include? @game.game_state %>;
</div>
<table>
<tr><th>Player</th><th>VPs</th><th>Resources</th></tr>
<% @game.players.each do |player| -%>
<tr>
<td><%= player.name %></td>
<td><%= @game.victory_points[player] || 0 %></td>
<td><%= player.hand_size %></td>
</tr>
<% end -%>
</table>
<div style="clear: both;"> </div>
